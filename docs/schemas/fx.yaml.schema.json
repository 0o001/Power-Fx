{
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "$id": "https://raw.githubusercontent.com/microsoft/Power-Fx/gregli/fx-schema/docs/schemas/fx.schema.json",
    "description": "Power Fx .fx file schema",
    "type": "object",
    "unevaluatedProperties": false,   
    "$defs": { "formula" : { "type": "string", "pattern": "^\\s*=" } },
    "properties": {  
        "Types": { 
            "type": "object", 
            "additionalProperties": { "$ref": "./type.schema.json" }
        },
        "Functions": { 
            "type": "object",
            "additionalProperties": { "$ref": "./function.schema.json" }            
        },
        "Formulas": {
            "oneOf": [ 
                { "$ref": "#/$defs/formula" },
                { "type": "array", "items": { "$ref": "#/$defs/formula" } }
            ]
        }
    },
    "patternProperties": {
        "\\sAs\\s": { 
            "type": "object",
            "$anchor": "instance",
            "patternProperties": { "\\sAs\\s": { "$ref": "#instance" } },
            "additionalProperties": { "$ref": "#/$defs/formula" }
        }
    }
}
